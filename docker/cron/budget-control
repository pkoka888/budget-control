# Budget Control Cron Jobs
# Run automated tasks for family sharing features

# Process allowances daily at 9 AM
0 9 * * * budgetapp /usr/bin/php /var/www/html/cron/family_sharing_automation.php >> /var/www/html/logs/cron.log 2>&1

# Expire old invitations daily at midnight
0 0 * * * budgetapp /usr/bin/php /var/www/html/cron/expire_invitations.php >> /var/www/html/logs/cron.log 2>&1

# Clean up old notifications weekly on Sunday at 2 AM
0 2 * * 0 budgetapp /usr/bin/php /var/www/html/cron/cleanup_notifications.php >> /var/www/html/logs/cron.log 2>&1

# Process budget alerts hourly
0 * * * * budgetapp /usr/bin/php /var/www/html/cron/budget_alerts.php >> /var/www/html/logs/cron.log 2>&1

# Health check every 5 minutes
*/5 * * * * budgetapp curl -f http://localhost/health > /dev/null 2>&1 || echo "Health check failed" >> /var/www/html/logs/health.log

# Rotate logs weekly
0 3 * * 1 root find /var/www/html/logs -name "*.log" -mtime +30 -delete
